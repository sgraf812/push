push
====

Lua library implementing knockout.js-like observable properties.

So... what exactly?
====
When dealing with keeping multiple data layers in sync as common in GUIs (View-ViewModel or View-Model relations), it is easy to introduce bugs and unfocused code blocks. 
The actual intent is shadowed by syncing boilerplate for all form fields/model bindings. 

That is especially true for HTML applications, where databinding is additionally complicated by DOM access, and here [knockout.js](http://knockoutjs.com/) kicks in. This library tries to provide the observable part as a modular core for other projects. It is actually written in [MoonScript](http://moonscript.org/) and as such the lua files are a nice autogenerated byproduct (and nothing more to me).

Zzz...
====
By now your eyes pretty much fast forwarded to the code samples... Anyway, assume `local push = require "push"` has happened before each snippet. There will always be a MoonScript example first, then lua.

Properties
====
```p = push.property "foo", "my property" -- (initial val, descriptive name)
assert p! == "foo" -- get
p "goo" -- set
assert p! == "goo"
assert p("hoo") == "hoo" -- set returns new value
assert p.name == "my property"```
```local p = push.property("foo", "my property") -- (initial val, descriptive name)
assert(p() == "foo") -- get
p("goo") -- set
assert(p() == "goo")
assert(p("hoo") == "hoo") -- set returns new value
assert(p.name == "my property")```

Push notifications
====
This is were it gets interesting...
```p = push.property! -- default initialization to (nil, "<unnamed>")
val = nil
p.push_to (nv) -> val = nv -- handle property changes
p "bar"
assert val == "bar"```
```local p = push.property() -- default initialization to (nil, "<unnamed>")
local val = nil
p.push_to(function(nv)
   -- handle property changes
  val = nv
end)
p("bar")
assert(val == "bar")```
